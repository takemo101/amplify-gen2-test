# Amplifyの使い方

## Amplify CLIのインストール
https://zenn.dev/ryosuke51/articles/91697feda2a1c3

#### 1. CLIのインストール
```bash
# 以下のコマンドでAmplify CLIをインストール
$ npm install -g @aws-amplify/cli

# 以下のコマンドでバージョンを確認
$ amplify --version
```

#### 2. CLIの初期化
1. AWSでIAMユーザーを作成
2. ユーザーにAdministratorAccessの権限を付与
3. ユーザーのアクセスキーとシークレットキーを取得（ユースケースはコマンドラインインターフェイスを選択）
```bash
# 以下のコマンドでAmplify CLIを初期化
# ユーザーのアクセスキーとシークレットキーを入力
$ amplify configure
```

#### 3. プロジェクトの初期化
1. ``npm create amplify@latest``でプロジェクトを作成
2. ./appディレクトリにnextjsプロジェクトを作成
3. ``pnpm dlx create-next-app@latest .``でnextjsプロジェクトを作成して中身だけ./appに移動
4. ``pnpm run dev``でnextjsプロジェクトを起動できればOK
5. amplifyのnext.jsテンプレートを使うのもあり``git clone https://github.com/<github-user>/amplify-next-template.git``

> 参考 https://docs.amplify.aws/react/start/manual-installation/
> 参考 https://pnpm.io/ja/cli/dlx
> 参考 https://github.com/aws-samples/amplify-next-template

#### 4. sandboxの使い方
1. ``pnpm ampx sandbox --profile=amplify-next``でsandboxを起動
2. ``pnpm ampx sandbox delete --profile=amplify-next``でsandboxを削除

#### 5. Lambda関数の追加
1. ``pnpm add --save-dev @types/aws-lambda``パッケージを追加
